<div class="test-notification-container">
  <h3>ğŸ”” Test Browser Notifications</h3>
  
  <!-- Scheduler Status -->
  <div class="status-panel" *ngIf="schedulerStatus">
    <div class="status-row">
      <span class="status-label">Scheduler Status:</span>
      <span [class]="schedulerStatus.isRunning ? 'status-success' : 'status-error'">
        {{ schedulerStatus.isRunning ? 'âœ… Running' : 'âŒ Stopped' }}
      </span>
    </div>
    <div class="status-row">
      <span class="status-label">Permission:</span>
      <span [class]="schedulerStatus.permission === 'granted' ? 'status-success' : 'status-error'">
        {{ schedulerStatus.permission }}
      </span>
    </div>
    <div class="status-row">
      <span class="status-label">Current Time:</span>
      <span class="status-info">{{ schedulerStatus.currentTime }}</span>
    </div>
    <div class="status-row">
      <span class="status-label">Current Day:</span>
      <span class="status-info">{{ schedulerStatus.currentDay }} ({{ schedulerStatus.currentDayNumber }})</span>
    </div>
    <div class="status-row">
      <span class="status-label">Notifications Today:</span>
      <span class="status-info">{{ schedulerStatus.notifiedCount }}</span>
    </div>
  </div>
  
  <div class="button-group">
    <button class="btn-test" (click)="testNotification()">
      ğŸ”” Test Instant Notification
    </button>
    
    <button class="btn-test-schedule" (click)="scheduleTestForNextMinute()">
      â° Schedule Test for Next Minute
    </button>
  </div>
  
  <div class="info-box">
    <p style="margin-top: 10px;"><strong>âš™ï¸ How Scheduling Works:</strong></p>
    <ol>
      <li>Set notification time in <strong>HH:mm</strong> format (e.g., 14:30 for 2:30 PM)</li>
      <li>Select which days of the week (0=Sunday, 1=Monday, etc.)</li>
      <li>Notification triggers when current time matches exactly</li>
      <li>Check console logs (F12) to see matching details</li>
      <li><strong>App must be OPEN or INSTALLED as PWA</strong></li>
    </ol>
  </div>
  
  <div class="help-text" *ngIf="schedulerStatus?.permission === 'denied'">
    <p class="error-text">
      âš ï¸ <strong>Notifications are BLOCKED!</strong> Enable them:
    </p>
    <ul>
      <li><strong>Chrome/Edge:</strong> Click ğŸ”’ in address bar â†’ Site settings â†’ Notifications â†’ Allow</li>
      <li><strong>Firefox:</strong> Click â“˜ in address bar â†’ Permissions â†’ Notifications â†’ Allow</li>
    </ul>
    <button class="btn-retry" (click)="testNotification()">Retry Permission Request</button>
  </div>
</div>
